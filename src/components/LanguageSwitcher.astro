---
/**
 * @file LanguageSwitcher.astro
 * @author Marco De Luca
 * @date 2026-02-11
 * @description Language selector showing IT, EN, DE, FR
 *              links. Highlights the current locale.
 *              Uses localizedPath to generate correct
 *              slug for each target language.
 *
 * @param {string} locale - Current language code
 * @param {string} currentPath - Semantic route name
 *                               (e.g. 'contact', not
 *                               the slug 'contatti')
 * @returns Rendered language switcher
 * @update 2026-02-11 - Fix: use localizedPath for
 *         correct per-language slug generation
 */

import {
  SUPPORTED_LOCALES,
  localizedPath,
} from '@lib/i18n.js';

interface Props
{
  locale: string;
  currentPath?: string;
}

const {
  locale,
  currentPath = '',
} = Astro.props;
---

<div
  class="lang-switcher"
  role="navigation"
  aria-label="Language"
>
  {SUPPORTED_LOCALES.map((lang) =>
  {
    const href = currentPath
      ? localizedPath(lang, currentPath)
      : `/${lang}/`;
    const isActive = lang === locale;

    return (
      <a
        href={href}
        class:list={[
          'lang-switcher__link',
          {
            'lang-switcher__link--active': isActive,
          },
        ]}
        aria-current={isActive ? 'true' : undefined}
        hreflang={lang}
        lang={lang}
      >
        {lang.toUpperCase()}
      </a>
    );
  })}
</div>
